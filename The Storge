local Library = loadstring(game:HttpGet("https://raw.githubusercontent.com/xHeptc/Kavo-UI-Library/main/source.lua"))()
local Window = Library.CreateLib("LuckyX : The Storage", "DarkTheme")
local Tab = Window:NewTab("Main")
local Section = Tab:NewSection("Main")

local locations = {
    ["1"] = Vector3.new(-725.588257, -88.4999619, 0.271846741, -0.0871522129, -5.48719576e-08, -0.996195018, 8.38782199e-08, 1, -6.24196375e-08, 0.996195018, -8.8999073e-08, -0.0871522129),
    ["2"] = Vector3.new(725.448914, -88.4999619, -0.510667801, -0.00872581732, -3.56817296e-08, 0.999961913, 1.82430693e-08, 1, 3.58422803e-08, -0.999961913, 1.85551272e-08, -0.00872581732),
    ["S"] = Vector3.new(571.239075, 5.79999971, 88.2324753, -0.993575633, 2.22877339e-09, 0.11317002, -9.76928938e-09, 1, -1.05463457e-07, -0.11317002, -1.05891509e-07, -0.993575633)
}

local selectedLocation = nil
local AutoFarm = false
local AutoFarm2 = false

-- Function to get Loot from contents
function Loot(v)
    for _, g in next, v.Contents.Loot:GetChildren() do
        if g:IsA("Model") or g:IsA("Part") then
            return g
        end
    end
end

-- Location dropdown for teleportation
Section:NewDropdown("Select Location", "Choose a place to teleport", {"1", "2", "S"}, function(locationName)
    selectedLocation = locations[locationName]
    print("Selected location:", locationName)

    if selectedLocation then
        local player = game.Players.LocalPlayer
        if player and player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
            -- Teleport to the selected location
            pcall(function()
                player.Character.HumanoidRootPart.CFrame = CFrame.new(selectedLocation)
                print("Teleported to:", selectedLocation)
            end)
        else
            warn("Error: Player or HumanoidRootPart not found.")
        end
    else
        print("Please select a location first.")
    end
end)

-- Auto Farm toggle 1
Section:NewToggle("Auto Farm", "Farm", function(v)
    AutoFarm = v
end)

-- Auto Farm toggle 2
Section:NewToggle("Auto Farm2", "Farm", function(v)
    AutoFarm2 = v
end)

-- Auto Farm logic
spawn(function()
    while true do task.wait()
        pcall(function()
            if AutoFarm then
                for i, v in next, workspace.Storages:GetChildren() do
                    if v:IsA("Model") and v.Name == "Room" and v.Door:FindFirstChild("Handle") and v.Door.Handle.ProximityPrompt.Enabled and not v:FindFirstChild("ClaimedStorage") and not v.Door:FindFirstChild("Lock") and not (v:FindFirstChild("Contents") and v.Contents:FindFirstChild("Loot") and Loot(v)) then
                        repeat task.wait()
                            if (v.Door.Handle.Position - game.Players.LocalPlayer.Character.HumanoidRootPart.Position).magnitude > 5 then
                                game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = v.Door.Handle.CFrame * CFrame.new(0, 2, 0)
                            end
                            v.Door.Handle.ProximityPrompt.HoldDuration = 0
                            fireproximityprompt(v.Door.Handle.ProximityPrompt, 0)
                            workspace.CurrentCamera.CFrame = CFrame.new(workspace.CurrentCamera.CFrame.p, v.Door.Handle.Position)
                        until not v.Door.Handle.ProximityPrompt.Enabled
                        local tick = tick()
                        repeat task.wait() until tick() - tick > 2
                    elseif v:IsA("Model") and v.Name == "Room" and v:FindFirstChild("Contents") and v.Contents:FindFirstChild("Loot") and Loot(v) then
                        local g = Loot(v)
                        if g then
                            warn("Loot Name", g.Name)
                            repeat task.wait(0.05)
                                if g:IsA("Model") then
                                    game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = g.PrimaryPart.CFrame * CFrame.new(0, 2, 0)
                                else
                                    game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = g.CFrame * CFrame.new(0, 2, 0)
                                end
                                g.ProximityPrompt.HoldDuration = 0
                                fireproximityprompt(g.ProximityPrompt, 0)
                                workspace.CurrentCamera.CFrame = CFrame.new(workspace.CurrentCamera.CFrame.p, g.Position)
                            until not g
                        end
                    end
                end
            end
        end)
    end
end)

-- Auto Farm logic for AutoFarm2
spawn(function()
    while true do task.wait()
        pcall(function()
            if AutoFarm2 then
                for i, c in next, workspace.BasementStorages:GetChildren() do
                    if c:IsA("Model") and c.Name == "BasementRoom" and c.Door:FindFirstChild("Handle") and c.Door.Handle.ProximityPrompt.Enabled and not c:FindFirstChild("ClaimedStorage") and not c.Door:FindFirstChild("Lock") and not (c:FindFirstChild("Contents") and c.Contents:FindFirstChild("Loot") and Loot(c)) then
                        repeat task.wait()
                            if (c.Door.Handle.Position - game.Players.LocalPlayer.Character.HumanoidRootPart.Position).magnitude > 5 then
                                game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = c.Door.Handle.CFrame * CFrame.new(0, 2, 0)
                            end
                            c.Door.Handle.ProximityPrompt.HoldDuration = 0
                            fireproximityprompt(c.Door.Handle.ProximityPrompt, 0)
                            workspace.CurrentCamera.CFrame = CFrame.new(workspace.CurrentCamera.CFrame.p, c.Door.Handle.Position)
                        until not c.Door.Handle.ProximityPrompt.Enabled
                        local tick = tick()
                        repeat task.wait() until tick() - tick > 2
                    elseif c:IsA("Model") and c.Name == "BasementRoom" and c:FindFirstChild("Contents") and c.Contents:FindFirstChild("Loot") and Loot(c) then
                        local g = Loot(c)
                        if g then
                            warn("Loot Name", g.Name)
                            repeat task.wait(0.05)
                                if g:IsA("Model") then
                                    game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = g.PrimaryPart.CFrame * CFrame.new(0, 2, 0)
                                else
                                    game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = g.CFrame * CFrame.new(0, 2, 0)
                                end
                                g.ProximityPrompt.HoldDuration = 0
                                fireproximityprompt(g.ProximityPrompt, 0)
                                workspace.CurrentCamera.CFrame = CFrame.new(workspace.CurrentCamera.CFrame.p, g.Position)
                            until not g
                        end
                    end
                end
            end
        end)
    end
end) 
