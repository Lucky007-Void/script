local UserInputService = game:GetService("UserInputService")
local Players = game:GetService("Players")
local player = Players.LocalPlayer

local function findTool(name)
    for _, tool in ipairs(player.Backpack:GetChildren()) do
        if tool.Name == name then
            return tool
        end
    end
    return nil
end

local function equipTool(toolName)
    local tool = findTool(toolName)
    if tool then
        tool.Parent = player.Character
        while player.Character and player.Character:FindFirstChildOfClass("Tool") ~= tool do
            wait(0.05)
        end
        return true
    end
    return false
end

local function pressKey(key)
    local VirtualInputManager = game:GetService("VirtualInputManager")
    VirtualInputManager:SendKeyEvent(true, key, false, game)
    wait(0.1)
    VirtualInputManager:SendKeyEvent(false, key, false, game)
end

local function clickOnce()
    mouse1click()
end

UserInputService.InputBegan:Connect(function(input, gameProcessed)
    if gameProcessed then return end
    if input.KeyCode == Enum.KeyCode.V then
        -- ถือ Locacaca Fruit
        if equipTool("Locacaca Fruit") then
            wait(0.05)
            -- กด J
            pressKey("J")
            wait(0.5)
            -- ถือ Arrow
            if equipTool("Arrow") then
                wait(0.05)
                -- คลิกหน้าจอครั้งหนึ่ง
                clickOnce()
            end
        end
    end
end)
