local Fluent = loadstring(game:HttpGet("https://github.com/dawid-scripts/Fluent/releases/latest/download/main.lua"))()

local Window = Fluent:CreateWindow({
    Title = "Auto System",
    SubTitle = "by Lucky_y3k",
    TabWidth = 120,
    Size = UDim2.fromOffset(520, 320),
    Acrylic = false,
    Theme = "Dark"
})

local Tab = Window:AddTab({ Title = "Farm", Icon = "rbxassetid://4483345998" })

---------------------------------------------------------------------
-- ‚öôÔ∏è Roblox Services
---------------------------------------------------------------------
local Players = game:GetService("Players")
local player = Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()
local humanoidRootPart = character:WaitForChild("HumanoidRootPart")
local spawnedItems = workspace:WaitForChild("SpawnedItems")

---------------------------------------------------------------------
-- üéØ ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏´‡∏•‡∏±‡∏Å
---------------------------------------------------------------------
local autoCollect = false
local autoBasket = false
local autoArrow = false
local autoLocaca = false

local targetItems = {
    ["Candy"] = true,
    ["Candy Basket"] = true,
    ["Arrow"] = true,
    ["Locacaca Fruit"] = true,
}

---------------------------------------------------------------------
-- üß© ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏õ‡∏£‡∏±‡∏ö HoldDuration = 0
---------------------------------------------------------------------
local function fixPrompt(item)
    if item:IsA("Model") and targetItems[item.Name] then
        local handle = item:FindFirstChild("Handle")
        if handle then
            for _, obj in pairs(handle:GetDescendants()) do
                if obj:IsA("ProximityPrompt") then
                    obj.HoldDuration = 0
                end
            end
        end
    end
end

-- ‡∏õ‡∏£‡∏±‡∏ö‡∏Ç‡∏≠‡∏á‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß
for _, item in pairs(spawnedItems:GetChildren()) do
    fixPrompt(item)
end

-- ‡∏õ‡∏£‡∏±‡∏ö‡∏Ç‡∏≠‡∏á‡∏ó‡∏µ‡πà spawn ‡πÉ‡∏´‡∏°‡πà
spawnedItems.ChildAdded:Connect(function(item)
    fixPrompt(item)
end)

local function getNearestItem(itemName)
    local nearestItem = nil
    local nearestDist = math.huge

    for _, item in pairs(spawnedItems:GetChildren()) do
        if item:IsA("Model") and item.Name == itemName then
            local handle = item:FindFirstChild("Handle")
            local grabPrompt = handle and handle:FindFirstChildWhichIsA("ProximityPrompt")

            if handle and grabPrompt then
                local dist = (humanoidRootPart.Position - handle.Position).Magnitude
                if dist < nearestDist then
                    nearestDist = dist
                    nearestItem = handle
                end
            end
        end
    end
    return nearestItem
end

local function autoGrabCandy()
    while autoCollect do
        local nearestItem = getNearestItem("Candy")
        if nearestItem then
            humanoidRootPart.CFrame = nearestItem.CFrame + Vector3.new(0, 3, 0)
            local grabPrompt = nearestItem:FindFirstChildWhichIsA("ProximityPrompt")
            if grabPrompt then
                grabPrompt.HoldDuration = 0
                fireproximityprompt(grabPrompt)
            end
        end
        task.wait(0.2)
    end
end

local function autoGrabBasket()
    while autoBasket do
        local nearestItem = getNearestItem("Candy Basket")
        if nearestItem then
            humanoidRootPart.CFrame = nearestItem.CFrame + Vector3.new(0, 3, 0)
            local grabPrompt = nearestItem:FindFirstChildWhichIsA("ProximityPrompt")
            if grabPrompt then
                grabPrompt.HoldDuration = 0
                fireproximityprompt(grabPrompt)
            end
        end
        task.wait(0.2)
    end
end

local function autoGrabArrow()
    while autoArrow do
        local nearestItem = getNearestItem("Arrow")
        if nearestItem then
            humanoidRootPart.CFrame = nearestItem.CFrame + Vector3.new(0, 3, 0)
            local grabPrompt = nearestItem:FindFirstChildWhichIsA("ProximityPrompt")
            if grabPrompt then
                grabPrompt.HoldDuration = 0
                fireproximityprompt(grabPrompt)
            end
        end
        task.wait(0.2)
    end
end

local function autoGrabLocaca()
    while autoLocaca do
        local nearestItem = getNearestItem("Locacaca Fruit")
        if nearestItem then
            humanoidRootPart.CFrame = nearestItem.CFrame + Vector3.new(0, 3, 0)
            local grabPrompt = nearestItem:FindFirstChildWhichIsA("ProximityPrompt")
            if grabPrompt then
                grabPrompt.HoldDuration = 0
                fireproximityprompt(grabPrompt)
            end
        end
        task.wait(0.2)
    end
end

---------------------------------------------------------------------
-- üç¨ Auto Use Candy
---------------------------------------------------------------------
local function findTool(name)
    for _, tool in ipairs(player.Backpack:GetChildren()) do
        if tool.Name == name then
            return tool
        end
    end
    return nil
end

---------------------------------------------------------------------
-- üß≠ UI Toggles
---------------------------------------------------------------------
Tab:AddToggle("AutoCollectCandy", {
    Title = "Auto Collect Candy",
    Description = "‡πÄ‡∏Å‡πá‡∏ö Candy ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥",
    Default = false,
    Callback = function(state)
        autoCollect = state
        if autoCollect then
            warn("‚úÖ Auto Collect Candy ‡πÄ‡∏õ‡∏¥‡∏î‡πÅ‡∏•‡πâ‡∏ß")
            task.spawn(autoGrabCandy)
        else
            warn("‚ùå Auto Collect Candy ‡∏õ‡∏¥‡∏î‡πÅ‡∏•‡πâ‡∏ß")
        end
    end
})

Tab:AddToggle("AutoCollectBasket", {
    Title = "Auto Collect Candy Basket",
    Description = "‡πÄ‡∏Å‡πá‡∏ö Candy Basket ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥",
    Default = false,
    Callback = function(state)
        autoBasket = state
        if autoBasket then
            warn("üß∫ Auto Collect Candy Basket ‡πÄ‡∏õ‡∏¥‡∏î‡πÅ‡∏•‡πâ‡∏ß")
            task.spawn(autoGrabBasket)
        else
            warn("üß∫ Auto Collect Candy Basket ‡∏õ‡∏¥‡∏î‡πÅ‡∏•‡πâ‡∏ß")
        end
    end
})

Tab:AddToggle("AutoCollectArrow", {
    Title = "Auto Collect Arrow",
    Description = "‡πÄ‡∏Å‡πá‡∏ö Arrow ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥",
    Default = false,
    Callback = function(state)
        autoArrow = state
        if autoArrow then
            warn("üß∫ Auto Collect Candy Arrow ‡πÄ‡∏õ‡∏¥‡∏î‡πÅ‡∏•‡πâ‡∏ß")
            task.spawn(autoGrabArrow)
        else
            warn("üß∫ Auto Collect Candy Arrow ‡∏õ‡∏¥‡∏î‡πÅ‡∏•‡πâ‡∏ß")
        end
    end
})

Tab:AddToggle("AutoCollectLocaca", {
    Title = "Auto Collect Locaca",
    Description = "‡πÄ‡∏Å‡πá‡∏ö Locaca ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥",
    Default = false,
    Callback = function(state)
        autoLocaca = state
        if autoLocaca then
            warn("üß∫ Auto Collect Locaca ‡πÄ‡∏õ‡∏¥‡∏î‡πÅ‡∏•‡πâ‡∏ß")
            task.spawn(autoGrabLocaca)
        else
            warn("üß∫ Auto Collect Locaca ‡∏õ‡∏¥‡∏î‡πÅ‡∏•‡πâ‡∏ß")
        end
    end
})
